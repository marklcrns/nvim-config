# why use yaml to manage plugins
# see http://genkisugimoto.com/blog/manage-vim-plugins-via-yaml/
# hook_add:         executed after the line is parsed
# hook_source:      executed before each plugin is sourced
# hook_post_source: executed after each plugin is sourced
# hook_post_update: executed after each plugin is updated
# hook_done_update: executed after all plugins are updated

# Startup Plugins
# ==========================================
- repo: Shougo/dein.vim

# Colorschemes
# ----------------------------------------
- repo: kyazdani42/nvim-web-devicons
  if: "has('nvim-0.5')"
- repo: folke/tokyonight.nvim
  hook_source: luafile $VIM_PATH/config/plugins/tokyonight.lua
- repo: catppuccin/nvim
  hook_source: luafile $VIM_PATH/config/plugins/catppuccin.lua
- repo: EdenEast/nightfox.nvim
  hook_source: luafile $VIM_PATH/config/plugins/nightfox.lua
- repo: nyoom-engineering/oxocarbon.nvim
  hook_source: luafile $VIM_PATH/config/plugins/oxocarbon.lua
- repo: rebelot/kanagawa.nvim
  hook_source: luafile $VIM_PATH/config/plugins/kanagawa.lua

# Session Manager
# ----------------------------------------
- repo: glepnir/dashboard-nvim
  on_event: VimEnter
  depends: [ 'nvim-web-devicons' ]
  hook_source: luafile $VIM_PATH/config/plugins/dashboard.lua

- repo: rmagatti/auto-session
  hook_source: luafile $VIM_PATH/config/plugins/auto-session.lua

- repo: rmagatti/session-lens
  on_cmd: Telescope
  depends: [ 'telescope.nvim', 'auto-session' ]
  hook_source: luafile $VIM_PATH/config/plugins/session-lens.lua

- repo: ahmedkhalf/project.nvim
  if: "has('nvim-0.5')"
  hook_source: luafile $VIM_PATH/config/plugins/project.lua

# Mapping Manager
# ----------------------------------------
- repo: liuchengxu/vim-which-key
  hook_source: source $VIM_PATH/config/plugins/whichkey.vim

# LSP + Syntax + Completion
# ==========================================

# LSP
# ----------------------------------------
- repo: williamboman/mason.nvim
  if: "has('nvim-0.7')"
  hook_source: luafile $VIM_PATH/config/plugins/mason.lua

- repo: williamboman/mason-lspconfig.nvim
  if: "has('nvim-0.7')"
  hook_source: luafile $VIM_PATH/config/plugins/mason-lspconfig.lua
  depends: [ 'mason.nvim' ]

- repo: jayp0521/mason-null-ls.nvim
  if: "has('nvim-0.7')"
  hook_source: luafile $VIM_PATH/config/plugins/mason-null-ls.lua
  depends: [ 'mason.nvim', ]

- repo: neovim/nvim-lspconfig
  if: "has('nvim-0.7')"
  hook_source: luafile $VIM_PATH/config/plugins/nvim-lspconfig.lua
  depends: [ 'mason-lspconfig.nvim' ]

- repo: jose-elias-alvarez/null-ls.nvim
  if: "has('nvim-0.7')"
  hook_source: luafile $VIM_PATH/config/plugins/null-ls.lua
  depends: [ 'mason-null-ls.nvim' ]

# - repo: ray-x/lsp_signature.nvim
#   if: "has('nvim-0.7')"
#   hook_source: luafile $VIM_PATH/config/plugins/lsp_signature.lua

- repo: glepnir/lspsaga.nvim
  if: "has('nvim-0.7')"
  on_event: BufRead
  hook_source: luafile $VIM_PATH/config/plugins/lspsaga.lua

- repo: WhoIsSethDaniel/toggle-lsp-diagnostics.nvim
  hook_source: luafile $VIM_PATH/config/plugins/toggle-lsp-diagnostics.lua

- repo: simrat39/symbols-outline.nvim
  if: "has('nvim-0.7')"
  hook_source: luafile $VIM_PATH/config/plugins/symbols-outline.lua

# Syntax
# ----------------------------------------
- repo: nvim-treesitter/nvim-treesitter
  if: "has('nvim-0.7')"
  build: TSUpdate
  hook_source: luafile $VIM_PATH/config/plugins/nvim-treesitter.lua

- repo: nvim-treesitter/nvim-treesitter-textobjects
  depends: [ 'nvim-treesitter', 'nvim-ufo' ]
  if: "has('nvim-0.7')"
  hook_source: luafile $VIM_PATH/config/plugins/nvim-treesitter-textobjects.lua

- repo: RRethy/nvim-treesitter-textsubjects
  depends: nvim-treesitter
  if: "has('nvim-0.7')"
  hook_source: luafile $VIM_PATH/config/plugins/nvim-treesitter-textsubjects.lua

- repo: nvim-treesitter/nvim-treesitter-context
  depends: nvim-treesitter
  if: "has('nvim-0.7')"

# Comletion
# ----------------------------------------
- repo: hrsh7th/nvim-cmp
  if: "has('nvim-0.7')"
  hook_source: luafile $VIM_PATH/config/plugins/nvim-cmp.lua

- repo: SirVer/ultisnips
  if: has('python3')
  hook_add: source $VIM_PATH/config/plugins/ultisnips.vim

- repo: honza/vim-snippets
  if: has('python3')
  depends: ultisnips
  merged: 0

- repo: mlaursen/vim-react-snippets
  if: has('python3')
  depends: ultisnips

# DEPRECATED: Replaced by copilot.lua
# # Make sure to run `:Copilot auth` after install
# - repo: github/copilot.vim
#   hook_source: source $VIM_PATH/config/plugins/copilot.vim

# Make sure to run `:Copilot auth` after install
- repo: zbirenbaum/copilot.lua
  on_cmd: Copilot
  on_event: InsertEnter
  hook_source: luafile $VIM_PATH/config/plugins/copilot.lua

- repo: zbirenbaum/copilot-cmp
  depends: [ 'copilot.lua', 'nvim-cmp' ]
  hook_source: luafile $VIM_PATH/config/plugins/copilot-cmp.lua

- repo: hrsh7th/cmp-nvim-lua
  if: "has('nvim-0.7')"
  depends: nvim-cmp

- repo: hrsh7th/cmp-nvim-lsp
  if: "has('nvim-0.7')"
  depends: nvim-cmp

- repo: hrsh7th/cmp-path
  if: "has('nvim-0.7')"
  depends: nvim-cmp

- repo: hrsh7th/cmp-buffer
  if: "has('nvim-0.7')"
  depends: nvim-cmp

# - repo: hrsh7th/cmp-cmdline
#   if: "has('nvim-0.7')"
#   depends: nvim-cmp

- repo: rcarriga/cmp-dap
  if: "has('nvim-0.7')"
  depends: nvim-cmp

# - repo: tzachar/cmp-tabnine
#   if: "has('nvim-0.7')"
#   depends: nvim-cmp
#   build: "./install.sh"
#   hook_source: luafile $VIM_PATH/config/plugins/cmp-tabnine.lua

- repo: hrsh7th/cmp-emoji
  if: "has('nvim-0.7')"
  depends: nvim-cmp

- repo: f3fora/cmp-spell
  if: "has('nvim-0.7')"
  depends: nvim-cmp

- repo: petertriho/cmp-git
  if: "has('nvim-0.7')"
  depends: nvim-cmp
  hook_source: luafile $VIM_PATH/config/plugins/cmp-git.lua

- repo: davidsierradz/cmp-conventionalcommits
  if: "has('nvim-0.7')"
  depends: nvim-cmp
  hook_source: luafile $VIM_PATH/config/plugins/cmp-conventionalcommits.lua

- repo: quangnguyen30192/cmp-nvim-ultisnips
  if: "has('nvim-0.7')"
  depends: [ultisnips, nvim-cmp]
  hook_source: luafile $VIM_PATH/config/plugins/cmp-nvim-ultisnips.lua

- repo: sedm0784/vim-you-autocorrect
  hook_source: source $VIM_PATH/config/plugins/vim-you-autocorrect.vim

# TODO: Lazy load plugins like this or move plugins into plugins_lazy.vim
- repo: gelguy/wilder.nvim
  hook_add: luafile $VIM_PATH/config/plugins/wilder.lua
  on_event' : 'CmdlineEnter'
  # lazy: 1

# Window management
# ----------------------------------------
- repo: beauwilliams/focus.nvim
  on_event: VimEnter
  if: "has('nvim-0.5')"
  hook_source: luafile $VIM_PATH/config/plugins/focus.lua

# - repo: blueyed/vim-diminactive
#   hook_source: source $VIM_PATH/config/plugins/vim-diminactive.vim

# - repo: sunjon/shade.nvim
#   if: "has('nvim-0.7')"
#   hook_source: luafile $VIM_PATH/config/plugins/shade.lua

# - repo: levouh/tint.nvim
#   hook_source: luafile $VIM_PATH/config/plugins/tint.lua

- repo: sindrets/winshift.nvim
  if: "has('nvim-0.5')"

# - repo: t9md/vim-choosewin
#   hook_source: source $VIM_PATH/config/plugins/vim-choosewin.vim
# }}}

# Syntax{{{

# Coding tools
# ----------------------------------------
- repo: junegunn/vim-easy-align
  hook_add: source $VIM_PATH/config/plugins/vim-easy-align.vim

# DEPRECATED: by nvim-treesitter-textobjects
# - repo: AndrewRadev/sideways.vim
# DEPRECATED: TreeSJ
# - repo: AndrewRadev/splitjoin.vim
- repo: Wansmer/treesj
  hook_source: luafile $VIM_PATH/config/plugins/treesj.lua

- repo: kana/vim-niceblock
  on_map: { x: <Plug> }
  hook_add: |
    let g:niceblock_no_default_key_mappings = 0

- repo: danymat/neogen
  if: "has('nvim-0.5')"
  hook_source: luafile $VIM_PATH/config/plugins/neogen.lua

- repo: monaqa/dial.nvim
  if: "has('nvim-0.5')"
  hook_source: luafile $VIM_PATH/config/plugins/dial.lua

- repo: wfxr/minimap.vim
  on_cmd: [ MinimapToggle ]
  build: 'cargo install --locked code-minimap'
  hook_source: source $VIM_PATH/config/plugins/minimap.vim

- repo: sindrets/diffview.nvim
  if: "has('nvim-0.7')"
  depends: [ plenary.nvim]
  hook_source: luafile $VIM_PATH/config/plugins/diffview.lua

- repo: AndrewRadev/linediff.vim
  on_cmd: [ Linediff ]

- repo: RRethy/vim-illuminate
  hook_source: luafile $VIM_PATH/config/plugins/vim-illuminate.lua

# Debugger
- repo: mfussenegger/nvim-dap
  if: "has('nvim-0.8')"
  hook_source: luafile $VIM_PATH/config/plugins/nvim-dap.lua
  depends: [ nvim-dap-ui, nvim-dap-virtual-text ]

- repo: rcarriga/nvim-dap-ui
  if: "has('nvim-0.8')"
  hook_source: luafile $VIM_PATH/config/plugins/nvim-dap-ui.lua

- repo: theHamsta/nvim-dap-virtual-text
  if: "has('nvim-0.8')"
  hook_source: luafile $VIM_PATH/config/plugins/nvim-dap-virtual-text.lua

- repo: jayp0521/mason-nvim-dap.nvim
  depends: [ mason.nvim, nvim-dap ]
  if: "has('nvim-0.8')"
  hook_source: luafile $VIM_PATH/config/plugins/mason-nvim-dap.lua

- repo: nvim-telescope/telescope-dap.nvim
  depends: [ telescope.nvim, nvim-dap ]
  if: "has('nvim-0.8')"
  hook_source: luafile $VIM_PATH/config/plugins/telescope-dap.lua

# Folds
- repo: kevinhwang91/promise-async
- repo: kevinhwang91/nvim-ufo
  on_event: BufRead
  depends: [nvim-treesitter, promise-async]
  hook_source: luafile $VIM_PATH/config/plugins/nvim-ufo.lua

# Commenter
- repo: numToStr/Comment.nvim
  if: "has('nvim')"
  hook_source: luafile $VIM_PATH/config/plugins/Comment.lua

# Surround
- repo: kylechui/nvim-surround
  if: "has('nvim-0.7')"
  hook_source: luafile $VIM_PATH/config/plugins/nvim-surround.lua

# Delimiter
- repo: windwp/nvim-autopairs
  if: "has('nvim-0.7')"
  hook_source: luafile $VIM_PATH/config/plugins/nvim-autopairs.lua

- repo: windwp/nvim-ts-autotag
  if: "has('nvim-0.5')"
  depends: nvim-treesitter
  hook_source: luafile $VIM_PATH/config/plugins/nvim-ts-autotag.lua

- repo: RRethy/nvim-treesitter-endwise
  if: "has('nvim-0.5')"
  depends: nvim-treesitter
  hook_source: luafile $VIM_PATH/config/plugins/nvim-treesitter-endwise.lua

# Titlecase
- repo: johmsalas/text-case.nvim
  if: "has('nvim-0.5')"
  hook_source: luafile $VIM_PATH/config/plugins/text-case.lua

- repo: rest-nvim/rest.nvim
  if: "has('nvim-0.5')"
  hook_source: luafile $VIM_PATH/config/plugins/rest.lua

# Git{{{
# - repo: lambdalisue/gina.vim
#   on_cmd: Gina
#   on_ft: [gitcommit, gitrebase]
#   hook_source: source $VIM_PATH/config/plugins/gina.vim

- repo: TimUntersberger/neogit
  on_cmd: Neogit
  if: "has('nvim-0.5')"
  depends: diffview.nvim
  hook_source: luafile $VIM_PATH/config/plugins/neogit.lua

- repo: rhysd/committia.vim
  hook_source: source $VIM_PATH/config/plugins/committia.vim

- repo: lewis6991/gitsigns.nvim
  if: "has('nvim-0.5')"
  hook_source: luafile $VIM_PATH/config/plugins/gitsigns.lua

- repo: itchyny/vim-gitbranch
# }}}

- repo: tyru/open-browser.vim
  hook_source: |
    let g:netrw_nogx = 1
    command! -nargs=1 Browse OpenBrowser <args>
# }}}
# Languages {{{

# Markdown
# ---------------------------------------
# - repo: preservim/vim-markdown
#   on_ft: [markdown, pandoc.markdown, rmd]
#   hook_add: source $VIM_PATH/config/plugins/vim-markdown.vim

# - repo: jghauser/follow-md-links.nvim
#   on_ft: [markdown, pandoc.markdown, rmd]
#   depends: nvim-treesitter

- repo: AckslD/nvim-FeMaco.lua
  depends: nvim-treesitter
  hook_source: luafile $VIM_PATH/config/plugins/nvim-FeMaco.lua

- repo: iamcco/markdown-preview.nvim
  if: "has('nvim') && executable('yarn')"
  on_ft: [markdown, pandoc.markdown, rmd, vimwiki]
  build: 'sh -c "cd app && yarn install"'
  hook_add: source $VIM_PATH/config/plugins/markdown-preview.vim

- repo: mzlogin/vim-markdown-toc
  hook_add: source $VIM_PATH/config/plugins/vim-markdown-toc.vim
  on_ft: [markdown, pandoc.markdown, rmd]

# LaTeX
# ----------------------------------------
- repo: lervag/vimtex
  on_ft: [plaintex, tex, latex, markdown]
  hook_source: source $VIM_PATH/config/plugins/vimtex.vim
# }}}

# Tools{{{
- { repo: romainl/vim-cool }

# To setup Google Calendar with calenar.vim
# https://github.com/itchyny/calendar.vim#important-notice
- repo: itchyny/calendar.vim
  on_cmd: Calendar
  hook_source: source $VIM_PATH/config/plugins/calendar.vim

- repo: junegunn/goyo.vim
  depends: Limelight.vim
  on_cmd: Goyo
  hook_source: source $VIM_PATH/config/plugins/goyo.vim

- repo: folke/zen-mode.nvim
  if: "has('nvim-0.5')"
  hook_source: luafile $VIM_PATH/config/plugins/zen-mode.lua

- repo: junegunn/Limelight.vim
  on_cmd: Limelight
  hook_source: source $VIM_PATH/config/plugins/limelight.vim

- repo: junegunn/fzf
  build: "cd ~/.fzf && ./install --all"
  merged: 0
  on_cmd: FZF
  type__depth: 1
  hook_source: |
    let g:fzf_layout = { 'down': '~25%' }

- repo: junegunn/fzf.vim
  depends: fzf
  merged: 0
  on_cmd: [Files, GitFiles, Buffers, Lines, Locate, Colors, Ag, Rg, Tags]
  on_func: [fzf#vim#with_preview, fzf#run, vista#finder#fzf#Run]

- repo: ludovicchabant/vim-gutentags
  if: "executable('ctags')"
  hook_source: source $VIM_PATH/config/plugins/vim-gutentags.vim

- repo: liuchengxu/vista.vim
  if: "executable('ctags')"
  on_cmd: Vista
  hook_source: source $VIM_PATH/config/plugins/vista.vim

- repo: benmills/vimux
  on_cmd: [VimuxPromptCommand, VimuxOpenRunner]

- repo: phaazon/mind.nvim
  depends: [ plenary.nvim ]
  hook_source: luafile $VIM_PATH/config/plugins/mind.lua

- repo: nvim-neorg/neorg
  on_ft: norg
  on_cmd: Neorg
  if: "has('nvim-0.5')"
  build: "Neorg sync-parsers"
  depends: [ plenary.nvim, nvim-treesitter, neorg-telescope, telescope.nvim ]
  hook_source: luafile $VIM_PATH/config/plugins/neorg.lua

- repo: nvim-neorg/neorg-telescope
  on_ft: norg
  on_cmd: [ Telescope, Neorg ]
  depends: [neorg, telescope.nvim]
  hook_source: luafile $VIM_PATH/config/plugins/neorg.lua

# Only load when in wiki directory
- repo: vimwiki/vimwiki
  on_if: "(getcwd() =~ $HOME . '/Documents/my-wiki.*' && &filetype == 'markdown' && expand('%:t') != 'README.md')"
  on_cmd: [VimwikIndex, VimwikiDiaryIndex, VimwikiUISelect]
  hook_source: source $VIM_PATH/config/plugins/vimwiki.vim
  # rev: 4d7a4da2e8e2fff34126e32d8818ba93c66a8a75

# Only load when in wiki diary sub directory
- repo: tbabej/taskwiki
  if: has('python3')
  on_if: "(expand('%:p') =~ $HOME . '/Documents/my-wiki/task/md/diary/.*' && &filetype == 'vimwiki' && expand('%:t') != 'README.md')"
  depends: vimwiki
  hook_source: source $VIM_PATH/config/plugins/taskwiki.vim
  # rev: 925d8ed2f522229d32d4cc39486080c244d20f7a

# RECOMMENDED neuron vim plugin
# - repo: oberblastmeister/neuron.nvim
#   rev: unstable
#   if: "executable('neuron')"
#   hook_source: luafile $VIM_PATH/config/plugins/neuron.lua

# - repo: pyrho/nerveux.nvim
#   hook_source: luafile $VIM_PATH/config/plugins/nerveux.lua

- repo: honza/dockerfile.vim
  on_ft: Dockerfile

- repo: thinca/vim-quickrun
  on_cmd: QuickRun
  hook_add: source $VIM_PATH/config/plugins/vim-quickrun.vim

- repo: michaelb/sniprun
  on_cmd: [SnipRun, SnipLive, SnipInfo]
  build: 'sh -c "install.sh"'
  hook_source: source $VIM_PATH/config/plugins/sniprun.lua

- repo: kshenoy/vim-signature
  hook_add: source $VIM_PATH/config/plugins/vim-signature.vim

- repo: tpope/vim-abolish

- repo: simnalamburt/vim-mundo
  on_map: { n: <Plug> }

- repo: tpope/vim-repeat
  on_map: .*

# NOTE: Temporarily disable to see if I can live without it
# WARNING: Interferes with vim macro
# - repo: max397574/better-escape.nvim
#   if: "has('nvim')"
#   hook_source: luafile $VIM_PATH/config/plugins/better-escape.lua

- repo: ggandor/leap.nvim
  if: "has('nvim-0.7')"
  hook_source: luafile $VIM_PATH/config/plugins/leap.lua

- repo: brooth/far.vim
  on_cmd: [F, Far, Farr, Farf, Refar, Farundo]
  hook_add: source $VIM_PATH/config/plugins/far.vim

- repo: lukas-reineke/indent-blankline.nvim
  on_event: BufRead
  hook_source: luafile $VIM_PATH/config/plugins/indent-blankline.lua

- repo: norcalli/nvim-colorizer.lua
  if: "has('nvim-0.5')"
  hook_source: luafile $VIM_PATH/config/plugins/colorizer.lua

- repo: mvllow/modes.nvim
  if: "has('nvim-0.5')"
  hook_source: luafile $VIM_PATH/config/plugins/modes.lua

- repo: karb94/neoscroll.nvim
  hook_source: luafile $VIM_PATH/config/plugins/neoscroll.lua

- repo: kevinhwang91/nvim-hlslens
  hook_source: luafile $VIM_PATH/config/plugins/nvim-hlslens.lua

- repo: petertriho/nvim-scrollbar
  hook_source: luafile $VIM_PATH/config/plugins/nvim-scrollbar.lua

# - repo: gen740/SmoothCursor.nvim
#   hook_source: luafile $VIM_PATH/config/plugins/SmoothCursor.lua

- repo: andymass/vim-matchup
  depends: nvim-treesitter
  hook_source: source $VIM_PATH/config/plugins/vim-matchup.vim

- repo: MunifTanjim/nui.nvim
- repo: s1n7ax/nvim-window-picker
  rev: "v1.*"
  hook_source: luafile $VIM_PATH/config/plugins/nvim-window-picker.lua

- repo: nvim-neo-tree/neo-tree.nvim
  on_cmd: [ NeoTree ]
  depends: [ 'plenary.nvim', 'nvim-web-devicons', 'nui.nvim', 'nvim-window-picker' ]
  hook_source: luafile $VIM_PATH/config/plugins/neo-tree.lua

- repo: nvim-lua/popup.nvim
  if: "has('nvim-0.5')"
- repo: nvim-lua/plenary.nvim
  if: "has('nvim-0.5')"
- repo: nvim-telescope/telescope.nvim
  if: "has('nvim-0.5')"
  on_event: VimEnter
  hook_source: luafile $VIM_PATH/config/plugins/telescope.lua

# Vim Utils
# ----------------------------------------
- repo: marklcrns/vim-smartq
  on_event: VimEnter
  hook_source: source $VIM_PATH/config/plugins/vim-smartq.vim

- repo: christoomey/vim-tmux-navigator
  on_event: VimEnter
  if: "! (has('win32') || has('win64'))"
  hook_add: |
    let g:tmux_navigator_disable_when_zoomed = 1
    let g:tmux_navigator_no_mappings = 1

- repo: tpope/vim-eunuch

- repo: skywind3000/asyncrun.vim

- repo: sgur/vim-editorconfig
  hook_add: source $VIM_PATH/config/plugins/vim-editorconfig.vim

- repo: folke/todo-comments.nvim
  on_event: BufRead
  if: "has('nvim-0.5')"
  hook_source: luafile $VIM_PATH/config/plugins/todo-comments.lua

- repo: romainl/vim-qf
  on_ft: qf
  on_map: { n: <Plug> }
  hook_source: source $VIM_PATH/config/plugins/vim-qf.vim
# }}}

# ETC {{{
- repo: dstein64/vim-startuptime

- repo: ianding1/leetcode.vim
  on_cmd: [LeetCodeList, LeetCodeTest, LeetCodeSubmit, LeetCodeSignIn]
  hook_add: |
    let g:leetcode_browser = 'firefox'
    let g:leetcode_solution_filetype = 'java'
